
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Create a Circuit</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="Generator" content="NetObjects Fusion 10 for Windows">
<script type="text/javascript">
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</script>
<SCRIPT TYPE="text/javascript" SRC="./assets/rollover.js"></SCRIPT>
<link rel="stylesheet" type="text/css" href="./style.css">
<link rel="stylesheet" type="text/css" href="./site.css">
</head>
<body style="margin: 0px;">
 <table cellpadding="0" cellspacing="0" border="0" width="720">
  <tr valign="top" align="left">
   <td>
    <table border="0" cellspacing="0" cellpadding="0" width="142">
     <tr valign="top" align="left">
      <td width="12" height="65"><img src="./assets/images/autogen/clearpixel.gif" width="12" height="1" border="0" alt=""></td>
      <td></td>
     </tr>
     <tr valign="top" align="left">
      <td height="120"></td>
      <td width="130">
       <table id="NavigationBar1" border="0" cellspacing="0" cellpadding="0" width="130">
        <tr valign="top" align="left">
         <td width="130" height="24"><a href="./index.html" style="cursor:hand; text-decoration:none;" onMouseOver="F_loadRollover('NavigationButton1','',0);F_roll('NavigationButton1',1)" onMouseOut="F_roll('NavigationButton1',0)"><img id="NavigationButton1" name="NavigationButton1" height="24" width="130" src="./assets/images/autogen/JavaScript_Home_Np1_1.gif" onmouseover="F_loadRollover(this,'JavaScript_Home_NRp2_1.gif',0)" border="0" alt="JavaScript Home" title="JavaScript Home"></a></td>
        </tr>
        <tr valign="top" align="left">
         <td width="130" height="24"><a href="./report_device_attributes.html" style="cursor:hand; text-decoration:none;" onMouseOver="F_loadRollover('NavigationButton2','',0);F_roll('NavigationButton2',1)" onMouseOut="F_roll('NavigationButton2',0)"><img id="NavigationButton2" name="NavigationButton2" height="24" width="130" src="./assets/images/autogen/Report_Device_Attributes_Np1.gif" onmouseover="F_loadRollover(this,'Report_Device_Attributes_NRp2.gif',0)" border="0" alt="Report Device Attributes" title="Report Device Attributes"></a></td>
        </tr>
        <tr valign="top" align="left">
         <td width="130" height="24"><a href="./updating_library_attributes.html" style="cursor:hand; text-decoration:none;" onMouseOver="F_loadRollover('NavigationButton3','',0);F_roll('NavigationButton3',1)" onMouseOut="F_roll('NavigationButton3',0)"><img id="NavigationButton3" name="NavigationButton3" height="24" width="130" src="./assets/images/autogen/Updating_Library_Attributes_Np1.gif" onmouseover="F_loadRollover(this,'Updating_Library_Attributes_NRp2.gif',0)" border="0" alt="Updating Library Attributes" title="Updating Library Attributes"></a></td>
        </tr>
        <tr valign="top" align="left">
         <td width="130" height="24"><a href="./create_device_symbol.html" style="cursor:hand; text-decoration:none;" onMouseOver="F_loadRollover('NavigationButton4','',0);F_roll('NavigationButton4',1)" onMouseOut="F_roll('NavigationButton4',0)"><img id="NavigationButton4" name="NavigationButton4" height="24" width="130" src="./assets/images/autogen/Create_Device_Symbol_Np1.gif" onmouseover="F_loadRollover(this,'Create_Device_Symbol_NRp2.gif',0)" border="0" alt="Create Device Symbol" title="Create Device Symbol"></a></td>
        </tr>
        <tr valign="top" align="left">
         <td width="130" height="24"><a href="./create_a_circuit.html" style="cursor:hand; text-decoration:none;" onMouseOver="F_loadRollover('NavigationButton5','',0);F_roll('NavigationButton5',1)" onMouseOut="F_roll('NavigationButton5',0)"><img id="NavigationButton5" name="NavigationButton5" height="24" width="130" src="./assets/images/autogen/Create_a_Circuit_Hp3_1.gif" onmouseover="F_loadRollover(this,'Create_a_Circuit_HRp4_1.gif',0)" border="0" alt="Create a Circuit" title="Create a Circuit"></a></td>
        </tr>
       </table>
      </td>
     </tr>
    </table>
   </td>
   <td>
    <table border="0" cellspacing="0" cellpadding="0" width="568">
     <tr valign="top" align="left">
      <td width="8" height="10"><img src="./assets/images/autogen/clearpixel.gif" width="8" height="1" border="0" alt=""></td>
      <td></td>
     </tr>
     <tr valign="top" align="left">
      <td height="45"></td>
      <td width="560"><img id="Banner1" height="45" width="560" src="./assets/images/autogen/Create_a_Circuit_NnBanner.gif" border="0" alt="Create a Circuit" title="Create a Circuit"></td>
     </tr>
    </table>
    <table border="0" cellspacing="0" cellpadding="0" width="578">
     <tr valign="top" align="left">
      <td width="8" height="10"><img src="./assets/images/autogen/clearpixel.gif" width="8" height="1" border="0" alt=""></td>
      <td width="570"><img src="./assets/images/autogen/clearpixel.gif" width="570" height="1" border="0" alt=""></td>
     </tr>
     <tr valign="top" align="left">
      <td></td>
      <td width="570" class="TextObject">
       <h2>Script Example - Creating a Circuit</h2>
       <p>Here, we&#8217;ll look at a simple example of a standalone script that will create a circuit by loading device symbols from a library, placing them and interconnecting the pins.&nbsp;This will illustrate a number of useful concepts:</p>
       <ul>
        <li>Creating a blank design</li>
        <li>Loading specified symbols from a library</li>
        <li>Placing and naming devices and port connectors in a circuit</li>
        <li>Interconnecting device pins</li>
       </ul>
       <p>Here are some ideas for applications for this script and ways it could be extended:</p>
       <ul>
        <li>Read data from a file or remote location and generate a circuit based on external data</li>
        <li>Read information about a device already in a circuit and generate a subcircuit for it with matching ports</li>
       </ul>
       <p>Here is the code for our script (this script is also provided in the file <span class="CodeReferenceBold"><b>Create Circuit.dwj</b></span><b> </b>inside the folder <b><span style="font-family: 'Courier New', 'Lucida Console', Courier, Monaco, Monospace; font-size: 12px;">Documentation\JavaScript Docs\Sample Scripts</span></b> with the DesignWorks program.</p>
       <pre style="font-size: 12px;">// Create a new, empty design<br><br>cct = newDesign();<br><br>pSpace = 280;&nbsp;&nbsp;// Spacing between input port connectors<br>xPort = -2100;&nbsp; // X position of input port connectors<br><br>// Find and load the library elements we need<br><br>l = DWLibrary(&quot;Simulation Gates&quot;);<br>if (l == null)<br>{<br>&nbsp;&nbsp;alert(&quot;Couldn&#39;t find library Simulation Gates&quot;);<br>&nbsp;&nbsp;halt;<br>}<br><br>tAnd2 = l.loadType(&quot;AND-2&quot;);<br>tOr3 = l.loadType(&quot;OR-3&quot;);<br><br>// Place devices and set their names<br>// Note: All positions must be a multiple of 70 to avoid nasty messages!<br><br>a1 = cct.addDevice(tAnd2, -1400, -560);<br>a1.setAttribute(&quot;Name&quot;, &quot;A1&quot;, 1);<br>a2 = cct.addDevice(tAnd2, -1400, 0);<br>a2.setAttribute(&quot;Name&quot;, &quot;A2&quot;, 1);<br>a3 = cct.addDevice(tAnd2, -1400, 560);<br>a3.setAttribute(&quot;Name&quot;, &quot;A3&quot;, 1);<br>o1 = cct.addDevice(tOr3, 0, 0);<br>o1.setAttribute(&quot;Name&quot;, &quot;O1&quot;, 1);<br><br>// Load and place port connectors<br><br>l = DWLibrary(&quot;Pseudo Devices&quot;);<br>if (l == null)<br>{<br>&nbsp;&nbsp;alert(&quot;Couldn&#39;t find library Pseudo Devices&quot;);<br>&nbsp;&nbsp;halt;<br>}<br><br>tIn = l.loadType(&quot;Port In&quot;);<br>tOut = l.loadType(&quot;Port Out&quot;);<br><br>y = -560;<br>p1 = cct.addDevice(tIn,&nbsp;xPort, y);<br>p1.setAttribute(&quot;Name&quot;, &quot;I1&quot;, 1);<br>y += pSpace;<br>p2 = cct.addDevice(tIn,&nbsp;xPort, y);<br>p2.setAttribute(&quot;Name&quot;, &quot;I2&quot;, 1);<br>y += pSpace;<br>p3 = cct.addDevice(tIn,&nbsp;xPort, y);<br>p3.setAttribute(&quot;Name&quot;, &quot;I3&quot;, 1);<br>y += pSpace;<br>p4 = cct.addDevice(tIn,&nbsp;xPort, y);<br>p4.setAttribute(&quot;Name&quot;, &quot;I4&quot;, 1);<br>y += pSpace;<br>p5 = cct.addDevice(tIn,&nbsp;xPort, y);<br>p5.setAttribute(&quot;Name&quot;, &quot;I5&quot;, 1);<br>y += pSpace;<br>p6 = cct.addDevice(tIn,&nbsp;xPort, y);<br>p6.setAttribute(&quot;Name&quot;, &quot;I6&quot;, 1);<br><br>po = cct.addDevice(tOut,&nbsp;1400, 70, &#39;W&#39;);<br>po.setAttribute(&quot;Name&quot;, &quot;OUT&quot;, 1);<br><br>// Connect everyone together<br><br>a1.pins[2].connectTo(o1.pins[0], true);<br>a2.pins[2].connectTo(o1.pins[1], true);<br>a3.pins[2].connectTo(o1.pins[2], true);<br><br>p1.pins[0].connectTo(a1.pins[0], true);<br>p2.pins[0].connectTo(a1.pins[1], true);<br>p3.pins[0].connectTo(a2.pins[0], true);<br>p4.pins[0].connectTo(a2.pins[1], true);<br>p5.pins[0].connectTo(a3.pins[0], true);<br>p6.pins[0].connectTo(a3.pins[1], true);<br><br>po.pins[0].connectTo(o1.pins[3], true);<br><br><br>// Because all these operations fly under the user-interface<br>// radar, we have to mark it as dirty so a close will prompt<br>// the user to save<br><br>cct.changed = true;</pre>
       <h3>Creating a New Design</h3>
       <pre style="font-size: 12px;">cct = newDesign();</pre>
       <p>The newDesign method opens a new design window with an empty, top-level circuit. This design has default internal settings and does not use any existing template.&nbsp;If you want to use an existing template, you have to locate and open the template file yourself.&nbsp;The returned value is a <a href="../JavaScript Object Reference/dwcircuit.html"><span class="CodeReference">DWCircuit</span></a> object, which has methods for accessing design data, adding and deleting circuit elements, and performing most operations that can be performed by a user.</p>
       <h3>Loading a Symbol from a Library</h3>
       <pre style="font-size: 12px;">l = DWLibrary(&quot;Simulation Gates&quot;);<br>if (l == null)<br>{<br>&nbsp;&nbsp;alert(&quot;Couldn&#39;t find library Simulation Gates&quot;);<br>&nbsp;&nbsp;halt;<br>}<br><br>tAnd2 = l.loadType(&quot;AND-2&quot;);</pre>
       <p>Using the object name <a href="../JavaScript Object Reference/dwlibrary.html"><span class="CodeReference">DWLibrary</span></a> creates a new object of that type. In this case, the given argument causes it to select the standard Simulation Gates library provided with the package.&nbsp;This will return a null value if the library isn&#8217;t found.</p>
       <p>We then use the <a href="../JavaScript Object Reference/dwlibrary.html#loadType"><span class="CodeReference">loadType</span></a> method to locate a specific type from the library.&nbsp;This method returns a <a href="../JavaScript Object Reference/dwtype.html"><span class="CodeReference">DWType</span></a> object which we will use later to instantiate the device in a design.</p>
       <h3>Placing a Device in a Circuit</h3>
       <pre style="font-size: 12px;">a1 = cct.addDevice(tAnd2, -1400, -560);<br>a1.setAttribute(&quot;Name&quot;, &quot;A1&quot;, 1);</pre>
       <p>This sequence is repeated many times in this script, once to place each device. Note these points:</p>
       <ul>
        <li>The <a href="../JavaScript Object Reference/dwcircuit.html#addDevice"><span class="CodeReference">addDevice</span></a> method creates an instance of the given device type in the circuit at the specified position.&nbsp;There is an additional, optional argument that allows you to specify the orientation of the device, but in this case, we leave them all facing the default &#8220;east&#8221; direction.</li>
        <li>We then use the <a href="../JavaScript Object Reference/dwdevice.html#setAttribute"><span class="CodeReference">setAttribute</span></a> method to set the name of the device.&nbsp;This is optional, but may be required depending on what types of reports or outputs you will generate from the design.</li>
        <li>We also place a number of port connector symbols in the circuit.&nbsp;These symbols mark the points where this circuit will connect to pins on a parent device symbol when it is attached as a subcircuit.&nbsp;Although port connectors don&#8217;t represent a phyical device, they are treated as devices for the purposes of circuit creation and editing operations.</li>
       </ul>
       <h3>Interconnecting Pins</h3>
       <pre style="font-size: 12px;">a1.pins[2].connectTo(o1.pins[0], true);</pre>
       <p>This statement is repeated many times in script to connect pins to each other.&nbsp;Note these points:</p>
       <ul>
        <li>The <a href="../JavaScript Object Reference/dwdevice.html#pins"><span class="CodeReference">pins</span></a> property of <a href="../JavaScript Object Reference/dwdevice.html"><span class="CodeReference">DWDevice</span></a> returns an array of <a href="../JavaScript Object Reference/dwpin.html"><span class="CodeReference">DWPin</span></a> objects, one representing each pin on the device.</li>
        <li>The <a href="../JavaScript Object Reference/dwpin.html#connectTo"><span class="CodeReference">connectoTo</span></a> method creates a connection between two pins and draws an interconnecting line between them.&nbsp;The placement of these lines is the simplest route between the two points, it makes no attempt to route around other circuit elements, etc.&nbsp;To perform your own line routing, you can use the <a href="../JavaScript Object Reference/dwsignal.html#addLine"><span class="CodeReference">addLine</span></a> method of <a href="../JavaScript Object Reference/dwsignal.html"><span class="CodeReference">DWSignal</span></a> to create your own signal line segments.</li>
       </ul>
       <h3>Marking the Circuit as Changed</h3>
       <pre style="font-size: 12px;">cct.changed = true;</pre>
       <p>To complete this process we mark the circuit as changed so that if the user closes it, the program will prompt for a save.&nbsp;Because many of the script operations access the design at a lower level than user operations, the &#8220;changed&#8221; status of the circuit is not necessarily affected the scripted changes.</p>
       <pre style="font-size: 12px;">&nbsp;</pre></td>
     </tr>
    </table>
    <table border="0" cellspacing="0" cellpadding="0">
     <tr valign="top" align="left">
      <td width="8" height="28"><img src="./assets/images/autogen/clearpixel.gif" width="8" height="1" border="0" alt=""></td>
      <td></td>
     </tr>
     <tr valign="top" align="left">
      <td></td>
      <td width="560" class="TextNavBar" style="text-align: center;">[<a href="./index.html">JavaScript&nbsp;Home</a>] [<a href="./designworks_object_model.html">DesignWorks&nbsp;Object&nbsp;Model</a>] [<a href="./examples.html">Examples</a>] [<a href="./report_device_attributes.html">Report&nbsp;Device&nbsp;Attributes</a>] [<a href="./updating_library_attributes.html">Updating&nbsp;Library&nbsp;Attributes</a>] [<a href="./create_device_symbol.html">Create&nbsp;Device&nbsp;Symbol</a>] [Create&nbsp;a&nbsp;Circuit] [<a href="./the_browser_panel___html_dialo.html">The&nbsp;Browser&nbsp;Panel&nbsp;&amp;&nbsp;HTML&nbsp;Dialogs</a>] [<a href="./invoking_a_script.html">Invoking&nbsp;a&nbsp;Script</a>]</td>
     </tr>
    </table>
   </td>
  </tr>
 </table>
</body>
</html>
 